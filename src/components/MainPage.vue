<template>
  <div>
    <div class="calcWrapper">
      <div class="calcLeftBlock">
        <div class="calcLeftBlockImg">
          <div class="listImgLeft">
            <svg width="304" height="333" viewBox="0 0 304 333" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13.2154 71.5816L13.8137 54.9785L10.5166 55.7865L4.20752 63.0925L-1.62162 75.2178L-10.3201 96.6859L-19.8499 125.352L-27.1468 151.002L-29.6024 182.871L-25.1265 215.098L-22.6084 217.772L-15.8054 201.294L-3.74364 161.311L3.46289 129.101L13.2154 71.5816Z" fill="#FDD6E5"/>
              <path d="M41.3034 99.2563L36.3335 76.2011L30.2192 82.6365L23.8579 93.658L18.2235 104.913L15.1594 115.126L14.029 130.625L14.7139 172.833L17.7361 204.594L22.5494 238.795L23.951 242.977L31.7279 222.146L37.7658 195.159L42.7394 165.964L44.169 142.164L43.6127 116.792L41.3034 99.2563Z" fill="#FDD6E5"/>
              <path d="M57.2186 83.8363L43.4076 79.4043L39.9679 77.3674L39.8254 74.5225L59.9454 71.6485L79.5334 67.6708L99.7057 61.0814L122.163 47.7607L143.452 39.6635L176.475 27.8675L211.147 15.6674L212.601 16.134L188.871 42.1089L161.753 62.3314L132.896 76.3976L106.467 86.5775L84.1659 88.7516L57.2186 83.8363Z" fill="#FDD6E5"/>
              <path d="M56.9959 112.69L57.9316 98.061L62.8111 114.556L69.6765 132.621L78.2809 156.842L87.7547 184.142L94.6061 216.199L97.277 259.977L93.7572 289.638L89.8617 307.049L85.6047 298.218L79.8036 282.361L71.9261 258.373L67.9682 241.241L61.5063 207.443L59.1589 179.631L57.1627 139.802L56.9959 112.69Z" fill="#FDD6E5"/>
              <path d="M82.4372 120.854L78.7646 109.412L85.1118 112.382L88.8889 116.393L103.465 131.334L128.593 161.791L158.848 204.157L178.356 231.878L195.06 251.234L193.944 252.742L183.715 253.192L170.683 245.278L150.292 228.47L121.581 193.131L99.6078 159.021L82.4372 120.854Z" fill="#FDD6E5"/>
              <path d="M113.304 132.625L108.658 125.536L140.446 136.67L179.594 156.697L221.935 183.348L240.198 195.74L232.824 200.838L219.298 202.096L205.63 200.509L188.185 194.91L172.245 186.063L149.284 170.297L135.772 157.564L113.304 132.625Z" fill="#FDD6E5"/>
              <path d="M122.093 117.718L109.047 123.795L128.284 131.834L151.934 137.557L187.761 134.125L206.816 129.044L234.998 111.029L260.857 89.4694L285.262 67.4432L280.511 67.7847L259.365 78.7269L219.306 97.5957L204.469 101.232L176.69 103.514L149.976 108.004L122.093 117.718Z" fill="#FDD6E5"/>
              <path d="M49.3641 16.5148C39.9381 28.8221 29.1516 41.2346 16.7969 52.8241C23.125 60.0758 29.9697 67.1617 36.3485 73.4026L41.7215 72.673C59.5282 70.6054 81.6056 67.8303 97.581 60.0516C102.091 57.9412 106.463 55.212 110.905 52.7923C114.829 50.5383 119.012 48.2015 123.195 45.8646C130.924 42.0581 139.12 39.0967 147.057 36.2181L215.082 12.3994C215.599 12.2337 216.184 12.3772 216.65 13.2222C217.047 13.758 216.927 14.4595 216.549 15.2439C189.922 49.6469 151.298 74.9705 104.533 88.6515C91.5509 92.4861 64.5936 89.5339 45.3471 81.455C49.1569 84.8736 57.9478 91.998 57.9478 91.998C64.7048 97.4545 78.3893 106.655 78.3893 106.655C78.3893 106.655 97.9496 118.612 107.737 122.764C117.205 118.068 128.619 113.411 140.241 109.681C151.088 106.2 162.074 103.338 171.201 102.067C177.09 101.171 183.376 100.812 189.146 100.618C196.534 100.236 204.181 99.7711 211.62 98.3784C225.585 95.223 239.167 87.8809 251.974 80.7874C262.853 74.9756 273.921 68.7716 285.285 65.1249C286.06 64.8763 286.904 64.9369 287.111 65.8649C287.508 66.4006 287.199 67.4943 286.683 67.66C263.264 90.4247 238.883 113.83 210.289 128.31C192.386 137.371 167.588 140.356 144.523 137.481C173.506 150.723 205.094 169.428 241.771 194.788C242.098 195.014 242.495 195.55 242.375 196.252C242.514 196.87 242.066 197.345 241.877 197.737C233.548 205.051 221.7 206.533 205.885 202.657C168.726 193.696 129.438 157.903 106.879 126.355C102.571 124.422 98.5217 122.406 94.403 120.081C115.693 139.77 133.701 165.817 151.569 191.246C165.937 212.161 180.96 233.53 197.357 251.143C197.684 251.37 197.823 251.988 197.703 252.69C197.583 253.391 197.394 253.783 196.877 253.949C187.737 258.871 177.465 252.554 170.45 247.18C131.514 217.904 94.8259 164.037 76.8767 109.793C71.0515 106.026 65.0879 101.641 59.3825 97.1734C63.29 112.164 69.0745 126.883 74.6007 141.686C81.8705 160.57 89.4679 179.68 92.9836 199.106C100.776 241.36 100.193 278.345 91.285 309.051C91.1652 309.753 90.6487 309.918 90.1321 310.084C89.6156 310.25 89.2189 309.714 88.8223 309.179C66.1415 259.768 55.6957 199.469 55.6668 118.92C55.7681 116.898 55.8003 114.567 55.9016 112.546C56.4131 107.409 56.7863 101.653 55.4529 94.4562C50.0058 89.9054 44.4895 85.0453 38.9732 80.1852C51.374 131.9 46.4203 190.179 24.8078 244.522C24.6879 245.223 23.9131 245.472 23.3274 245.328C22.7416 245.185 22.345 244.649 22.2066 244.03C14.3818 204.107 11.6024 163.228 13.2321 122.26C13.8721 107.8 24.7551 88.3945 34.3702 75.695C28.0605 69.7635 22.129 63.0476 15.9393 56.4145C8.40787 120.493 -3.6995 172.78 -22.287 220.847C-22.4761 221.239 -22.9234 221.714 -23.4399 221.88C-23.9565 222.046 -24.3531 221.51 -24.7498 220.974C-33.8189 194.048 -30.8509 165.249 -26.909 145.75C-21.8699 121.259 -12.4031 97.9983 -3.31444 75.5222C-0.0497086 67.8442 5.70998 57.708 12.5769 52.5208C7.3695 46.567 2.35118 40.221 -2.73634 33.5657L0.104547 32.654C4.3987 38.2379 8.62374 43.5124 13.107 48.704C12.5669 42.5785 12.1467 35.7515 12.5013 28.6758L15.3423 27.7642C14.8678 35.5413 15.1681 43.0698 15.8466 49.8139C26.3427 39.8153 36.1147 29.0545 44.5263 18.3989L49.4333 16.8242L49.3641 16.5148ZM206.157 198.923C216.115 201.363 224.486 201.661 231.2 199.506C233.783 198.677 236.038 197.622 238.155 195.948C197.291 167.954 162.635 147.913 131.189 134.798C124.488 133.301 117.907 131.104 112.031 128.348C134.83 158.493 171.41 190.846 206.157 198.923ZM111.389 124.244C117.971 126.442 124.622 128.949 131.341 131.765C157.303 137.689 188.406 135.664 209.081 125.383C235.16 112.041 257.633 91.2373 279.589 70.5993C270.43 74.2016 261.548 79.041 252.666 83.8805C239.6 91.0569 226.019 98.399 211.795 101.637C204.167 103.422 196.451 103.578 189.063 103.959C183.293 104.153 177.266 104.43 171.445 105.635C153.45 108.095 129.689 115.72 111.389 124.244ZM171.377 243.899C177.341 248.284 185.716 253.553 193.206 251.149L193.464 251.066C177.395 233.68 163.027 212.764 149.125 192.693C128.341 162.896 107.022 131.944 80.668 111.891C98.5294 164.506 134.078 215.755 171.377 243.899ZM58.3644 112.418C58.2631 114.44 58.2309 116.771 58.0604 118.483C57.8631 196.784 68.0322 255.846 89.3338 304.042C97.1583 274.678 97.3125 239.488 90.0043 199.399C86.5577 180.283 78.9604 161.172 71.7598 142.597C67.1838 130.805 62.5387 118.704 58.7375 106.663C58.8253 108.292 58.724 110.314 58.3644 112.418ZM15.6257 121.824C13.8391 160.853 16.789 200.02 23.6128 237.943C44.0724 184.634 48.339 128.233 35.4403 78.0038C27.8036 88.4109 16.335 107.672 15.6257 121.824ZM103.772 85.2491C148.212 72.314 185.047 48.8907 211.125 16.9843L147.749 39.3112C140.07 42.1069 131.805 44.759 124.076 48.5655C120.082 50.5102 115.969 53.1564 112.044 55.4104C107.603 57.8301 103.231 60.5592 98.7204 62.6696C95.2431 64.4485 91.3691 65.6917 87.4951 66.9348C73.0322 71.5761 56.3277 73.6215 42.3443 75.4568L41.242 75.4789C59.8014 85.4359 90.2731 89.2495 103.772 85.2491ZM-0.902334 76.4057C-9.80191 98.4896 -19.2687 121.75 -24.1187 145.849C-27.8209 163.945 -30.4985 190.331 -23.2052 215.506C-5.44312 168.698 6.35528 117.505 13.4579 55.2217C7.55485 59.7681 2.10414 68.8106 -0.902334 76.4057Z" fill="#DC94B8"/>
            </svg>
          </div>
          <!--<img src="https://kdm1.ru/local/img/epil12.png" alt="">-->
        </div>
      </div>
      <div class="calcRightBlock">
        <div class="calcRightTop">
          <div class="vkrDropWrap">
            <div class="titleCalcTop">
              Рассчитайте стоимость услуг в&nbsp;удобном калькуляторе
            </div>
            <div>
              <button class="bt" @click="showModal">Рассчитать</button>
            </div>
          </div>
        </div>
      </div>

    </div>
    <div class="warp_model" :class="{active: isActive}">
      <div class="modal_body" :class="classObject">
        <div class="close_model" @click="showModal">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <line x1="1" y1="-1" x2="23.0674" y2="-1" transform="matrix(-0.717764 0.696286 -0.717764 -0.696286 24.2747 7.24219)" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <line x1="1" y1="-1" x2="23.0674" y2="-1" transform="matrix(0.717764 0.696286 0.717764 -0.696286 7.92017 7)" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="container-fluid">
          <div class="row" v-if="currentStep == 1">
            <div class="col">
              <div class="title mb-3">Укажите ваш пол</div>

              <input type="radio" id="man" value="man" v-model="floor" />
              <label for="man" class="bt label-bt">
                Мужчина
                <span>
                <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                </svg>
                </span>
              </label>
              <input type="radio" id="female" value="female" v-model="floor" />
              <label for="female" class="bt label-bt">
                Женщина
                <span>
                <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                </svg>
                </span>
              </label>



              <div class="title mt-5 mb-3">Выберите лазер</div>
              <input type="radio" id="diode_laser" value="diode_laser" v-model="laser" />
              <label for="diode_laser" class="bt label-bt">
                Диодный лазер
                <span>
                <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                </svg>
                </span>
              </label>
              <input type="radio" id="alexandrite_laser" value="alexandrite_laser" v-model="laser" />
              <label for="alexandrite_laser" class="bt label-bt">
                Александритовый лазер
                <span>
                <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                </svg>
                </span>
              </label>




              <div class="title mt-5 mb-3">Были у нас?</div>
              <input type="checkbox" id="first_visit"  v-model="first_visit" />
              <label for="first_visit" class="bt label-bt">
                Первое посещение
                <span>
                <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                </svg>
                </span>
              </label>
            </div>
            <div class="col">
              <div class="warp_choose_zone"  :class="{active: isShowChooseZone}">
                <div class="title mb-3">Выберите зону</div>
                <div class="row ">
                  <div class="col-12 " :class="[this.floor === 'man' ? 'col-md-12' : 'col-md-6']">
                      <input type="radio" id="face_and_neck" value="face_and_neck" v-model="choose_zone" />
                    <label for="face_and_neck" class="bt label-bt">
                      Лицо и шея
                      <span>
                        <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                        </svg>
                      </span>
                    </label>
                  </div>


                  <div class="col-12 col-md-6">
                    <input type="radio" id="arms" value="arms" v-model="choose_zone" />
                    <label for="arms" class="bt label-bt">
                      Руки
                      <span>
                        <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                        </svg>
                      </span>
                    </label>
                  </div>

                  <div class="col-12 col-md-6">
                    <input type="radio" id="legs" value="legs" v-model="choose_zone" />
                    <label for="legs" class="bt label-bt">
                      Ноги
                      <span>
                        <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                        </svg>
                      </span>
                    </label>
                  </div>

                  <div class="col-12 col-md-6" v-if="this.floor != 'man'">
                    <input type="radio" id="biniki" value="biniki" v-model="choose_zone" />
                    <label for="biniki" class="bt label-bt">
                      Биники
                      <span>
                        <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                        </svg>
                      </span>
                    </label>
                  </div>

                  <div class="col-12" >
                    <input type="radio" id="back_and_belly" value="back_and_belly" v-model="choose_zone" />
                    <label for="back_and_belly" class="bt label-bt">
                      Спина и живот
                      <span>
                        <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                        </svg>
                      </span>
                    </label>
                  </div>
                </div>
                <div class="row">
                  <div class="col-12" >
                    <div class="title mt-5 mb-3">Выберите услуги <span>Можно несколько</span></div>
                    <div class="col" v-for="service in services" :key="service.code">
                      <input type="checkbox" :id="service.code" :value="service.code" v-model="val_service" />
                      <label :for="service.code" class="bt label-bt">
                        {{service.name}}
                        <span>
                        <svg width="13" height="9" viewBox="0 0 13 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5303 0.46967C12.8232 0.762563 12.8232 1.23744 12.5303 1.53033L5.53033 8.53033C5.23744 8.82322 4.76256 8.82322 4.46967 8.53033L0.46967 4.53033C0.176777 4.23744 0.176777 3.76256 0.46967 3.46967C0.762563 3.17678 1.23744 3.17678 1.53033 3.46967L5 6.93934L11.4697 0.46967C11.7626 0.176777 12.2374 0.176777 12.5303 0.46967Z" fill="#F5CFD6"/>
                        </svg>
                      </span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="warp_selected_services" :class="{active: isSelectedServices}">
                <div class="d-flex flex-column justify-content-between h-100">
                  <div class="warp-select_services">
                    <div class="title mb-3">Выбранные услуги</div>

                    <div class="col mb-4" v-for="(service,index ) in storeService" :key="index">
                      <div class="d-flex justify-content-between" :id="service.code">
                        <span class="name">{{service.name}}</span>
                        <span class="price">{{service.price}}
                          <button @click="removeService(index)">
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.75011 1C6.75011 0.585787 6.41433 0.25 6.00011 0.25C5.5859 0.25 5.25011 0.585786 5.25011 1L5.25011 5.24999L1.00012 5.24999C0.585907 5.24999 0.25012 5.58578 0.25012 5.99999C0.25012 6.41421 0.585907 6.74999 1.00012 6.74999L5.25011 6.74999L5.25011 11C5.25011 11.4142 5.5859 11.75 6.00011 11.75C6.41433 11.75 6.75011 11.4142 6.75011 11L6.75011 6.74999L11.0001 6.74999C11.4143 6.74999 11.7501 6.41421 11.7501 5.99999C11.7501 5.58578 11.4143 5.24999 11.0001 5.24999H6.75011L6.75011 1Z" fill="black"/></svg>
                          </button>
                        </span>
                      </div>
                    </div>
                    <div class="col mb-4" v-for="service in SelectedServices" :key="service.code">
                      <div class="d-flex justify-content-between" :id="service.code">
                        <span class="name">{{service.name}}</span>
                        <span class="price">{{service.price}}
                          <button @click="removeServiceTmp(service.code)">
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.75011 1C6.75011 0.585787 6.41433 0.25 6.00011 0.25C5.5859 0.25 5.25011 0.585786 5.25011 1L5.25011 5.24999L1.00012 5.24999C0.585907 5.24999 0.25012 5.58578 0.25012 5.99999C0.25012 6.41421 0.585907 6.74999 1.00012 6.74999L5.25011 6.74999L5.25011 11C5.25011 11.4142 5.5859 11.75 6.00011 11.75C6.41433 11.75 6.75011 11.4142 6.75011 11L6.75011 6.74999L11.0001 6.74999C11.4143 6.74999 11.7501 6.41421 11.7501 5.99999C11.7501 5.58578 11.4143 5.24999 11.0001 5.24999H6.75011L6.75011 1Z" fill="black"/></svg>
                          </button>
                        </span>
                      </div>
                    </div>
                    <div class="col warp_add_service">
                      <button @click="addServices">Добавить услугу <svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6.68957 1.5C6.68957 1.08579 6.35378 0.75 5.93957 0.75C5.52535 0.75 5.18957 1.08579 5.18957 1.5L5.18957 5.74999L0.939573 5.74999C0.52536 5.74999 0.189573 6.08578 0.189573 6.49999C0.189573 6.91421 0.52536 7.24999 0.939573 7.24999L5.18957 7.24999L5.18957 11.5C5.18957 11.9142 5.52535 12.25 5.93957 12.25C6.35378 12.25 6.68957 11.9142 6.68957 11.5L6.68957 7.24999L10.9396 7.24999C11.3538 7.24999 11.6896 6.91421 11.6896 6.49999C11.6896 6.08578 11.3538 5.74999 10.9396 5.74999H6.68957L6.68957 1.5Z" fill="#2E1B3E"/>
                      </svg>
                      </button>
                    </div>
                  </div>
                  <div class="warp_itog">
                    <div class="title">Итого:</div>
                    <div class="price"><div>{{allPrice.price}}<span class="rubl">₽</span></div> <div class="discount" v-if="allPrice.discountPrice">{{allPrice.discountPrice}}<span class="rubl">₽</span></div></div>
                    <div class="warp_sign_up_online">
                      <button class="bt_sing" @click="goToStep(2);">Записаться онлайн</button>
                    </div>
                  </div>

                </div>

              </div>
            </div>
          </div>
          <div class="row" v-if="currentStep == 2">
            <div class="col-8">
              <div class="title">Укажите ваши контактные данные</div>
              <div class="sub_title">
                Менеджер перезвонит вам для подтверждения заказа
              </div>
              <Form @submit="onSubmit" class="warp_form">
                <div class="row flex-column align-items-center warp_statps_1">
                  <div class="col position-relative">
                    <Field name="name" type="text" placeholder="Ваше имя" class="input-control"  :rules="validateText" />
                    <ErrorMessage class="input-error" name="name" />
                  </div>

                  <div class="col position-relative">

                    <Field name="phone" type="text" placeholder="Телефон" id="phone-mask" class="input-control"  :rules="validatePhone" />
                    <ErrorMessage class="input-error" name="phone" />
                  </div>
                  <div class="col">
                    <button type="submit" class="bt_sing">Записаться онлайн</button>
                  </div>
                </div>
              </Form>
            </div>
            <div class="col-4 warp_result">
              <div class="title mb-4">Выбранные услуги</div>
              <div class="col mb-2" v-for="service in storeService" :key="service.code">
                <div class="d-flex justify-content-between" :id="service.code">
                  <span class="name">{{service.name}}</span>
                  <span class="price">{{service.price}}</span>
                </div>
              </div>
              <div class="warp_itog">
                <div class="title mb-1">Итого:</div>
                <div class="price"><div>{{allPrice.price}}<span class="rubl">₽</span></div> <div class="discount" v-if="allPrice.discountPrice">{{allPrice.discountPrice}}<span class="rubl">₽</span></div></div>
              </div>
            </div>
          </div>
          <div class="row" v-if="currentStep == 3">
            <div class="col-12">
                <div class="result">Спасибо за доверие!</div>
                <div class="sub_result">Менеджер перезвонит вам в ближайшее время</div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</template>

<script>
import { Field, Form, ErrorMessage } from 'vee-validate';
import axios from "axios";
import Inputmask from 'inputmask';

export default {
  name: 'MainPage',
  components: {
    Field,
    Form,
    ErrorMessage,
  },
  props: {
    msg: String
  },
  mounted () {
    // ... используем
      let im = new Inputmask("99-9999999");
      im.mask(document.getElementById('phone-mask'));
  },
  data(){

    let Allservices=
        {
          "female":
              {
                "diode_laser":{
                  "face_and_neck":{
                    "full_face":
                        {
                          "name": "Лицо полностью",
                          "code": "full_face",
                          "price":1500,
                        },
                    "upper_lip":
                        {
                          "name": "Верхняя губа",
                          "code": "upper_lip",
                          "price":450,
                        },
                    "chin":
                        {
                          "name": "Подбородок",
                          "code": "chin",
                          "price":450,
                        },
                    "whiskers":
                        {
                          "name": "Бакенбарды",
                          "code": "whiskers",
                          "price":450,
                        },
                    "cheekbones":
                        {
                          "name": "Скулы",
                          "code": "cheekbones",
                          "price":450,
                        },
                    "forehead":
                        {
                          "name": "Лоб",
                          "code": "forehead",
                          "price":500,
                        },
                    "nose":
                        {
                          "name": "Нос",
                          "code": "nose",
                          "price":450,
                        },
                    "anterior_posterior_neck":
                        {
                          "name": "Передняя/задняя поверхность шеи",
                          "code": "anterior_posterior_neck",
                          "price":600,
                        },
                    "neck_completely":
                        {
                          "name": "Шея полностью",
                          "code": "neck_completely",
                          "price":1200,
                        }
                  },
                  "arms":{
                    "hands_completely":
                        {
                          "name": "Руки полностью",
                          "code": "hands_completely",
                          "price":1300,
                        },
                    "armpits":
                        {
                          "name": "Подмышечные впадины",
                          "code": "armpits",
                          "price":1000,
                        },
                    "shoulders":
                        {
                          "name": "Плечи",
                          "code": "shoulders",
                          "price":1000,
                        },
                    "forearm":
                        {
                          "name": "Предплечье",
                          "code": "forearm",
                          "price":800,
                        }
                  },
                  "legs":{
                    "full_legs":
                        {
                          "name": "Ноги полностью",
                          "code": "full_legs",
                          "price":2000,
                        },
                    "hips":
                        {
                          "name": "Бедра",
                          "code": "hips",
                          "price":1000,
                        },
                    "knees":
                        {
                          "name": "Колени",
                          "code": "knees",
                          "price":500,
                        },
                    "shins":
                        {
                          "name": "Голени",
                          "code": "shins",
                          "price":1000,
                        },
                    "foot_toes":
                        {
                          "name": "Стопа + пальцы",
                          "code": "foot_toes",
                          "price":500,
                        }
                  },
                  "biniki":{
                    "total_bikini":
                        {
                          "name": "Тотальное бикини",
                          "code": "total_bikini",
                          "price":1500,
                        },
                    "classic_bikini":
                        {
                          "name": "Классическое бикини",
                          "code": "classic_bikini",
                          "price":1000,
                        },
                    "pubic_part":
                        {
                          "name": "Лобковая часть",
                          "code": "pubic_part",
                          "price":1000,
                        },
                    "intergluteal_zone":
                        {
                          "name": "Межъягодичная зона",
                          "code": "intergluteal_zone",
                          "price":450,
                        },
                    "buttocks":
                        {
                          "name": "Ягодицы",
                          "code": "buttocks",
                          "price":800,
                        }
                  },
                  "back_and_belly":{
                    "full_belly":
                        {
                          "name": "Живот полностью",
                          "code": "full_belly",
                          "price":1000,
                        },
                    "white_line_abdomen":
                        {
                          "name": "Белая линия живота",
                          "code": "white_line_abdomen",
                          "price":450,
                        },
                    "full_back":
                        {
                          "name": "Спина полностью",
                          "code": "full_back",
                          "price":1500,
                        },
                    "upper_back":
                        {
                          "name": "Верх спины",
                          "code": "upper_back",
                          "price":1000,
                        },
                    "small_back":
                        {
                          "name": "Поясница",
                          "code": "small_back",
                          "price":800,
                        },
                    "full_chest":
                        {
                          "name": "Грудь полностью",
                          "code": "full_chest",
                          "price":1300,
                        },
                    "areolas_nipples":
                        {
                          "name": "Ареолы сосков",
                          "code": "areolas_nipples",
                          "price":450,
                        },
                  },
                },
                "alexandrite_laser":{
                  "face_and_neck":{
                    "full_face":
                        {
                          "name": "Лицо полностью",
                          "code": "full_face",
                          "price":2700,
                        },
                    "wpper_lip":
                        {
                          "name": "Верхняя губа",
                          "code": "wpper_lip",
                          "price":700,
                        },
                    "between_eyebrows":
                        {
                          "name": "Межбровье",
                          "code": "between_eyebrows",
                          "price":300,
                        },
                    "ears":
                        {
                          "name": "ears",
                          "code": "Уши",
                          "price":600,
                        },
                    "chin":
                        {
                          "name": "Подбородок",
                          "code": "chin",
                          "price":700,
                        },
                    "whiskers":
                        {
                          "name": "Бакенбарды",
                          "code": "whiskers",
                          "price":700,
                        },
                    "cheekbones":
                        {
                          "name": "Скулы",
                          "code": "",
                          "price":700,
                        },
                    "forehead":
                        {
                          "name": "Лоб",
                          "code": "forehead",
                          "price":700,
                        },
                    "nose":
                        {
                          "name": "Нос",
                          "code": "nose",
                          "price":600,
                        },
                    "anterior_surface_neck":
                        {
                          "name": "Передняя поверхность шеи",
                          "code": "anterior_surface_neck",
                          "price":700,
                        },
                    "back_neck":
                        {
                          "name": "Задняя поверхность шеи",
                          "code": "back_neck",
                          "price":700,
                        },
                  },
                  "arms":{
                    "hands_completely":
                        {
                          "name": "Руки полностью",
                          "code": "hands_completely",
                          "price":2700,
                        },
                    "armpits":
                        {
                          "name": "Подмышечные впадины",
                          "code": "armpits",
                          "price":1400,
                        },
                    "forearm":
                        {
                          "name": "Предплечье",
                          "code": "forearm",
                          "price":1800,
                        },
                    "hands_fingers":
                        {
                          "name": "Кисти рук+пальцы",
                          "code": "hands_fingers",
                          "price":700,
                        },
                  },
                  "legs":{
                    "full_legs":
                        {
                          "name": "Ноги полностью",
                          "code": "full_legs",
                          "price":6700,
                        },
                    "hips":
                        {
                          "name": "Бедра",
                          "code": "hips",
                          "price":3900,
                        },
                    "knees":
                        {
                          "name": "Колени",
                          "code": "knees",
                          "price":1200,
                        },
                    "shins":
                        {
                          "name": "Голени",
                          "code": "shins",
                          "price":3200,
                        },
                    "foot_toes":
                        {
                          "name": "Стопа + пальцы",
                          "code": "foot_toes",
                          "price":700,
                        }
                  },
                  "biniki":{
                    "total_bikini":
                        {
                          "name": "Тотальное бикини",
                          "code": "total_bikini",
                          "price":2400,
                        },
                    "classic_bikini":
                        {
                          "name": "Классическое бикини",
                          "code": "classic_bikini",
                          "price":1500,
                        },
                    "pubic_part":
                        {
                          "name": "Лобковая часть",
                          "code": "pubic_part",
                          "price":1000,
                        },
                    "intergluteal_zone":
                        {
                          "name": "Межъягодичная зона",
                          "code": "intergluteal_zone",
                          "price":1200,
                        },
                    "buttocks":
                        {
                          "name": "Ягодицы",
                          "code": "buttocks",
                          "price":1900,
                        }
                    ,
                    "one_Flash":
                        {
                          "name": "Одна вспышка",
                          "code": "one_Flash",
                          "price":50,
                        }
                  },
                  "back_and_belly":{
                    "full_belly":
                        {
                          "name": "Живот полностью",
                          "code": "full_belly",
                          "price":1700,
                        },
                    "white_line_abdomen":
                        {
                          "name": "Белая линия живота",
                          "code": "white_line_abdomen",
                          "price":700,
                        },
                    "full_back":
                        {
                          "name": "Спина полностью",
                          "code": "full_back",
                          "price":3300,
                        },
                    "small_back":
                        {
                          "name": "Поясница",
                          "code": "small_back",
                          "price":1300,
                        },
                    "full_chest":
                        {
                          "name": "Грудь полностью",
                          "code": "full_chest",
                          "price":1800,
                        },
                    "areolas_nipples":
                        {
                          "name": "Ареолы сосков",
                          "code": "areolas_nipples",
                          "price":700,
                        },
                    "neckline":
                        {
                          "name": "Декольте",
                          "code": "neckline",
                          "price":900,
                        },
                  },
                }
              },
          "man":{
            "diode_laser":{
              "face_and_neck":{
                "full_face":
                    {
                      "name": "Лицо полностью",
                      "code": "full_face",
                      "price":1950,
                    },
                "neck_front":
                    {
                      "name": "Шея спереди",
                      "code": "neck_front",
                      "price":780,
                    },
                "back_neck":
                    {
                      "name": "Шея сзади",
                      "code": "back_neck",
                      "price":780,
                    },
                "beard_correction":
                    {
                      "name": "Коррекция бороды",
                      "code": "beard_correction",
                      "price":1300,
                    },
                "nustache":
                    {
                      "name": "Усы",
                      "code": "nustache",
                      "price":585,
                    },
                "eyebrow":
                    {
                      "name": "Межбровье",
                      "code": "eyebrow",
                      "price":390,
                    },
                "sideburns":
                    {
                      "name": "Бакенбарды",
                      "code": "sideburns",
                      "price":585,
                    },
                "cheeks":
                    {
                      "name": "Щеки",
                      "code": "cheeks",
                      "price":585,
                    },
                "chin":
                    {
                      "name": "Подбородок",
                      "code": "chin",
                      "price":585,
                    },
                "lob":
                    {
                      "name": "Лоб",
                      "code": "lob",
                      "price":585,
                    },
              },
              "arms":{
                "hands_completely":
                    {
                      "name": "Руки полностью",
                      "code": "hands_completely",
                      "price":1690,
                    },
                "armpits":
                    {
                      "name": "Подмышечные впадины",
                      "code": "armpits",
                      "price":1300,
                    },
                "hands_fingers":
                    {
                      "name": "Кисти рук + пальцы  ",
                      "code": "hands_fingers",
                      "price":650,
                    },
                "forearm":
                    {
                      "name": "Предплечье",
                      "code": "forearm",
                      "price":1300,
                    }
              },
              "legs":{
                "full_legs":
                    {
                      "name": "Ноги полностью",
                      "code": "full_legs",
                      "price":2600,
                    },
                "hips":
                    {
                      "name": "Бедра",
                      "code": "hips",
                      "price":1300,
                    },
                "knees":
                    {
                      "name": "Колени",
                      "code": "knees",
                      "price":650,
                    },
                "shins":
                    {
                      "name": "Голени",
                      "code": "shins",
                      "price":1300,
                    },
                "foot_toes":
                    {
                      "name": "Стопа + пальцы",
                      "code": "foot_toes",
                      "price":650,
                    }
              },
              "back_and_belly":{
                "full_belly":
                    {
                      "name": "Живот полностью",
                      "code": "full_belly",
                      "price":1300,
                    },
                "white_line_abdomen":
                    {
                      "name": "Белая линия живота",
                      "code": "white_line_abdomen",
                      "price":585,
                    },
                "full_back":
                    {
                      "name": "Спина полностью",
                      "code": "full_back",
                      "price":1950,
                    },
                "small_back":
                    {
                      "name": "Поясница",
                      "code": "small_back",
                      "price":1040,
                    },
                "full_chest":
                    {
                      "name": "Грудь полностью",
                      "code": "full_chest",
                      "price":1690,
                    },
                "areolas_nipples":
                    {
                      "name": "Ареолы сосков",
                      "code": "areolas_nipples",
                      "price":585,
                    },
              },
            },
            "alexandrite_laser":{
              "face_and_neck":{
                "full_face":
                    {
                      "name": "Лицо полностью",
                      "code": "full_face",
                      "price":3510,
                    },
                "neck_front":
                    {
                      "name": "Шея спереди",
                      "code": "neck_front",
                      "price":910,
                    },
                "back_neck":
                    {
                      "name": "Шея сзади",
                      "code": "back_neck",
                      "price":910,
                    },
                "beard_correction":
                    {
                      "name": "Коррекция бороды",
                      "code": "beard_correction",
                      "price":2500,
                    },
                "nustache":
                    {
                      "name": "Усы",
                      "code": "nustache",
                      "price":780,
                    },
                "eyebrow":
                    {
                      "name": "Межбровье",
                      "code": "eyebrow",
                      "price":390,
                    },
                "sideburns":
                    {
                      "name": "Бакенбарды",
                      "code": "sideburns",
                      "price":910,
                    },
                "cheeks":
                    {
                      "name": "Щеки",
                      "code": "cheeks",
                      "price":910,
                    },
                "chin":
                    {
                      "name": "Подбородок",
                      "code": "chin",
                      "price":910,
                    },
                "lob":
                    {
                      "name": "Лоб",
                      "code": "lob",
                      "price":910,
                    },
                "mustache":
                    {
                      "name": "Усы",
                      "code": "mustache",
                      "price":910,
                    },
                "nostrils":
                    {
                      "name": "Ноздри",
                      "code": "nostrils",
                      "price":780,
                    },
              },
              "arms":{
                "hands_completely":
                    {
                      "name": "Руки полностью",
                      "code": "hands_completely",
                      "price":3510,
                    },
                "armpits":
                    {
                      "name": "Подмышечные впадины",
                      "code": "armpits",
                      "price":1820,
                    },
                "forearm":
                    {
                      "name": "Предплечье",
                      "code": "forearm",
                      "price":2340,
                    },
                "hands_fingers":
                    {
                      "name": "Кисти рук+пальцы",
                      "code": "hands_fingers",
                      "price":910,
                    },
              },
              "legs":{
                "full_legs":
                    {
                      "name": "Ноги полностью",
                      "code": "full_legs",
                      "price":8710,
                    },
                "hips":
                    {
                      "name": "Бедра",
                      "code": "hips",
                      "price":5070,
                    },
                "knees":
                    {
                      "name": "Колени",
                      "code": "knees",
                      "price":1560,
                    },
                "shins":
                    {
                      "name": "Голени",
                      "code": "shins",
                      "price":4160,
                    },
                "foot_toes":
                    {
                      "name": "Стопа + пальцы",
                      "code": "foot_toes",
                      "price":910,
                    }
              },
              "back_and_belly":{
                "full_belly":
                    {
                      "name": "Живот полностью",
                      "code": "full_belly",
                      "price":2210,
                    },
                "white_line_abdomen":
                    {
                      "name": "Белая линия живота",
                      "code": "white_line_abdomen",
                      "price":910,
                    },
                "full_back":
                    {
                      "name": "Спина полностью",
                      "code": "full_back",
                      "price":4290,
                    },

                "small_back":
                    {
                      "name": "Поясница",
                      "code": "small_back",
                      "price":1690,
                    },
                "full_chest":
                    {
                      "name": "Грудь полностью",
                      "code": "full_chest",
                      "price":2340,
                    },
                "areolas_nipples":
                    {
                      "name": "Ареолы сосков",
                      "code": "areolas_nipples",
                      "price":910,
                    },
                "neckline":
                    {
                      "name": "Декольте",
                      "code": "neckline",
                      "price":1170,
                    },
              },
            }
          }
        }


    return{
      currentStep: 3,
      val_service:[],
      SelectedServices:{},
      floor:'',
      laser:'',
      choose_zone:'',
      services:{},
      Allservices,
      price:'',
      //discountPrice:'',
      first_visit:false,
      isActive:false,
      isShowChooseZone:false,
      isSelectedServices:false
    }
  },
  computed:{
    storeService(){


      /*console.log(this.$store.state.services);
      for(let k in this.$store.state.services){
        console.log(this.$store.state.services[k]);
        console.log(k);
      }

      if(this.$store.state.services.length>0){
        return this.$store.state.services.filter((index, element) => {
            console.log(index);
          console.log(123);
            return element;

        });
      } else {
        return this.$store.state.services;
      }*/
      return this.$store.state.services;
    },
    allPrice(){
      let showPrice;
      if(this.first_visit){
        showPrice = this.$store.state.price + this.price;
        let percent = "20"; // Необходимый процент
        let number_percent = showPrice / 100 * percent;
        //this.discountPrice = showPrice;
        showPrice={
          price: showPrice - number_percent,
          discountPrice: showPrice,
        }
      } else {
        showPrice = this.$store.state.price + this.price;
        showPrice={
          price: showPrice,
        }
      }

      return showPrice;
    },
    classObject() {
      return {
        finish: this.currentStep === 3
      }
    }
  },
  watch: {
    floor: function () {
      if(this.floor !=='' && this.laser !==''){
        this.SelectedServices=[];
        this.price=0;
        this.choose_zone='';
        this.isShowChooseZone=true;
      } else {
        this.isShowChooseZone=false;
      }
    },
    laser: function () {
      if(this.floor !=='' && this.laser !==''){
        this.SelectedServices=[];
        this.price=0;
        this.choose_zone='';
        this.isShowChooseZone=true;
      } else {
        this.isShowChooseZone=false;
      }

    },
    first_visit: function () {
      console.log(this.first_visit);
    },
    choose_zone: function (){
      this.val_service =[];
      this.SelectedServices=[];
      this.price=0;
      this.services={};
      //this.isSelectedServices=false;
      //console.log(this.Allservices);
      if(this.choose_zone.length>0){
            this.services=this.Allservices[this.floor][this.laser][this.choose_zone];
      }
      /*if(this.floor === 'female' && this.laser === 'diode_laser'){ //Лазерная эпиляция (диодный лазер, женщины)
        switch (this.choose_zone){
          case "face_and_neck":
            this.services= {
              "full_face":
                  {
                    "name": "Лицо полностью",
                    "code": "full_face",
                    "price":1500,
                  },
              "upper_lip":
                  {
                    "name": "Верхняя губа",
                    "code": "upper_lip",
                    "price":450,
                  },
              "chin":
                  {
                    "name": "Подбородок",
                    "code": "chin",
                    "price":450,
                  },
              "whiskers":
                  {
                    "name": "Бакенбарды",
                    "code": "whiskers",
                    "price":450,
                  },
              "cheekbones":
                  {
                    "name": "Скулы",
                    "code": "cheekbones",
                    "price":450,
                  },
              "forehead":
                  {
                    "name": "Лоб",
                    "code": "forehead",
                    "price":500,
                  },
              "nose":
                  {
                    "name": "Нос",
                    "code": "nose",
                    "price":450,
                  },
              "anterior_posterior_neck":
                  {
                    "name": "Передняя/задняя поверхность шеи",
                    "code": "anterior_posterior_neck",
                    "price":600,
                  },
              "neck_completely":
                  {
                    "name": "Шея полностью",
                    "code": "neck_completely",
                    "price":1200,
                  }
            }
            break;
          case "arms":
            this.services= {
              "hands_completely":
                  {
                    "name": "Руки полностью",
                    "code": "hands_completely",
                    "price":1300,
                  },
              "armpits":
                  {
                    "name": "Подмышечные впадины",
                    "code": "armpits",
                    "price":1000,
                  },
              "shoulders":
                  {
                    "name": "Плечи",
                    "code": "shoulders",
                    "price":1000,
                  },
              "forearm":
                  {
                    "name": "Предплечье",
                    "code": "forearm",
                    "price":800,
                  }

            }
            break;
          case "legs":
            this.services= {
              "full_legs":
                  {
                    "name": "Ноги полностью",
                    "code": "full_legs",
                    "price":2000,
                  },
              "hips":
                  {
                    "name": "Бедра",
                    "code": "hips",
                    "price":1000,
                  },
              "knees":
                  {
                    "name": "Колени",
                    "code": "knees",
                    "price":500,
                  },
              "shins":
                  {
                    "name": "Голени",
                    "code": "shins",
                    "price":1000,
                  },
              "foot_toes":
                  {
                    "name": "Стопа + пальцы",
                    "code": "foot_toes",
                    "price":500,
                  }

            }
            break;
          case "biniki":
            this.services= {
              "total_bikini":
                  {
                    "name": "Тотальное бикини",
                    "code": "total_bikini",
                    "price":1500,
                  },
              "classic_bikini":
                  {
                    "name": "Классическое бикини",
                    "code": "classic_bikini",
                    "price":1000,
                  },
              "pubic_part":
                  {
                    "name": "Лобковая часть",
                    "code": "pubic_part",
                    "price":1000,
                  },
              "intergluteal_zone":
                  {
                    "name": "Межъягодичная зона",
                    "code": "intergluteal_zone",
                    "price":450,
                  },
              "buttocks":
                  {
                    "name": "Ягодицы",
                    "code": "buttocks",
                    "price":800,
                  }

            }
            break;
          case "back_and_belly":
            this.services= {
              "full_belly":
                  {
                    "name": "Живот полностью",
                    "code": "full_belly",
                    "price":1000,
                  },
              "white_line_abdomen":
                  {
                    "name": "Белая линия живота",
                    "code": "white_line_abdomen",
                    "price":450,
                  },
              "full_back":
                  {
                    "name": "Спина полностью",
                    "code": "full_back",
                    "price":1500,
                  },
              "upper_back":
                  {
                    "name": "Верх спины",
                    "code": "upper_back",
                    "price":1000,
                  },
              "small_back":
                  {
                    "name": "Поясница",
                    "code": "small_back",
                    "price":800,
                  },
              "full_chest":
                  {
                    "name": "Грудь полностью",
                    "code": "full_chest",
                    "price":1300,
                  },
              "areolas_nipples":
                  {
                    "name": "Ареолы сосков",
                    "code": "areolas_nipples",
                    "price":450,
                  },


            }
            break;
        }
      } else if(this.floor === 'female' && this.laser === 'alexandrite_laser'){ //Лазерная эпиляция (Candela GentleLase Pro, женщины)
        switch (this.choose_zone){
          case "face_and_neck":
            this.services= {
              "full_face":
                  {
                    "name": "Лицо полностью",
                    "code": "full_face",
                    "price":2700,
                  },
              "wpper_lip":
                  {
                    "name": "Верхняя губа",
                    "code": "wpper_lip",
                    "price":700,
                  },
              "between_eyebrows":
                  {
                    "name": "Межбровье",
                    "code": "between_eyebrows",
                    "price":300,
                  },
              "ears":
                  {
                    "name": "ears",
                    "code": "Уши",
                    "price":600,
                  },
              "chin":
                  {
                    "name": "Подбородок",
                    "code": "chin",
                    "price":700,
                  },
              "whiskers":
                  {
                    "name": "Бакенбарды",
                    "code": "whiskers",
                    "price":700,
                  },
              "cheekbones":
                  {
                    "name": "Скулы",
                    "code": "",
                    "price":700,
                  },
              "forehead":
                  {
                    "name": "Лоб",
                    "code": "forehead",
                    "price":700,
                  },
              "nose":
                  {
                    "name": "Нос",
                    "code": "nose",
                    "price":600,
                  },
              "anterior_surface_neck":
                  {
                    "name": "Передняя поверхность шеи",
                    "code": "anterior_surface_neck",
                    "price":700,
                  },
              "back_neck":
                  {
                    "name": "Задняя поверхность шеи",
                    "code": "back_neck",
                    "price":700,
                  },

            }
            break;
          case "arms":
            this.services= {
              "hands_completely":
                  {
                    "name": "Руки полностью",
                    "code": "hands_completely",
                    "price":2700,
                  },
              "armpits":
                  {
                    "name": "Подмышечные впадины",
                    "code": "armpits",
                    "price":1400,
                  },
               "forearm":
                  {
                    "name": "Предплечье",
                    "code": "forearm",
                    "price":1800,
                  },
              "hands_fingers":
                  {
                    "name": "Кисти рук+пальцы",
                    "code": "hands_fingers",
                    "price":700,
                  },

            }
            break;
          case "legs":
            this.services= {
              "full_legs":
                  {
                    "name": "Ноги полностью",
                    "code": "full_legs",
                    "price":6700,
                  },
              "hips":
                  {
                    "name": "Бедра",
                    "code": "hips",
                    "price":3900,
                  },
              "knees":
                  {
                    "name": "Колени",
                    "code": "knees",
                    "price":1200,
                  },
              "shins":
                  {
                    "name": "Голени",
                    "code": "shins",
                    "price":3200,
                  },
              "foot_toes":
                  {
                    "name": "Стопа + пальцы",
                    "code": "foot_toes",
                    "price":700,
                  }

            }
            break;
          case "biniki":
            this.services= {
              "total_bikini":
                  {
                    "name": "Тотальное бикини",
                    "code": "total_bikini",
                    "price":2400,
                  },
              "classic_bikini":
                  {
                    "name": "Классическое бикини",
                    "code": "classic_bikini",
                    "price":1500,
                  },
              "pubic_part":
                  {
                    "name": "Лобковая часть",
                    "code": "pubic_part",
                    "price":1000,
                  },
              "intergluteal_zone":
                  {
                    "name": "Межъягодичная зона",
                    "code": "intergluteal_zone",
                    "price":1200,
                  },
              "buttocks":
                  {
                    "name": "Ягодицы",
                    "code": "buttocks",
                    "price":1900,
                  }
              ,
              "one_Flash":
                  {
                    "name": "Одна вспышка",
                    "code": "one_Flash",
                    "price":50,
                  }

            }
            break;
          case "back_and_belly":
            this.services= {
              "full_belly":
                  {
                    "name": "Живот полностью",
                    "code": "full_belly",
                    "price":1700,
                  },
              "white_line_abdomen":
                  {
                    "name": "Белая линия живота",
                    "code": "white_line_abdomen",
                    "price":700,
                  },
              "full_back":
                  {
                    "name": "Спина полностью",
                    "code": "full_back",
                    "price":3300,
                  },
              "small_back":
                  {
                    "name": "Поясница",
                    "code": "small_back",
                    "price":1300,
                  },
              "full_chest":
                  {
                    "name": "Грудь полностью",
                    "code": "full_chest",
                    "price":1800,
                  },
              "areolas_nipples":
                  {
                    "name": "Ареолы сосков",
                    "code": "areolas_nipples",
                    "price":700,
                  },
              "neckline":
                  {
                    "name": "Декольте",
                    "code": "neckline",
                    "price":900,
                  },

            }
            break;
        }
      } else if(this.floor === 'man' && this.laser === 'diode_laser') { //Лазерная эпиляция (диодный лазер, мужчины)
        switch (this.choose_zone){
          case "face_and_neck":
            this.services= {
              "full_face":
                  {
                    "name": "Лицо полностью",
                    "code": "full_face",
                    "price":1950,
                  },
              "neck_front":
                  {
                    "name": "Шея спереди",
                    "code": "neck_front",
                    "price":780,
                  },
              "back_neck":
                  {
                    "name": "Шея сзади",
                    "code": "back_neck",
                    "price":780,
                  },
              "beard_correction":
                  {
                    "name": "Коррекция бороды",
                    "code": "beard_correction",
                    "price":1300,
                  },
              "nustache":
                  {
                    "name": "Усы",
                    "code": "nustache",
                    "price":585,
                  },
              "eyebrow":
                  {
                    "name": "Межбровье",
                    "code": "eyebrow",
                    "price":390,
                  },
              "sideburns":
                  {
                    "name": "Бакенбарды",
                    "code": "sideburns",
                    "price":585,
                  },
              "cheeks":
                  {
                    "name": "Щеки",
                    "code": "cheeks",
                    "price":585,
                  },
              "chin":
                  {
                    "name": "Подбородок",
                    "code": "chin",
                    "price":585,
                  },
              "lob":
                  {
                    "name": "Лоб",
                    "code": "lob",
                    "price":585,
                  },

            }
            break;
          case "arms":
            this.services= {
              "hands_completely":
                  {
                    "name": "Руки полностью",
                    "code": "hands_completely",
                    "price":1690,
                  },
              "armpits":
                  {
                    "name": "Подмышечные впадины",
                    "code": "armpits",
                    "price":1300,
                  },
              "hands_fingers":
                  {
                    "name": "Кисти рук + пальцы  ",
                    "code": "hands_fingers",
                    "price":650,
                  },
              "forearm":
                  {
                    "name": "Предплечье",
                    "code": "forearm",
                    "price":1300,
                  }

            }
            break;
          case "legs":
            this.services= {
              "full_legs":
                  {
                    "name": "Ноги полностью",
                    "code": "full_legs",
                    "price":2600,
                  },
              "hips":
                  {
                    "name": "Бедра",
                    "code": "hips",
                    "price":1300,
                  },
              "knees":
                  {
                    "name": "Колени",
                    "code": "knees",
                    "price":650,
                  },
              "shins":
                  {
                    "name": "Голени",
                    "code": "shins",
                    "price":1300,
                  },
              "foot_toes":
                  {
                    "name": "Стопа + пальцы",
                    "code": "foot_toes",
                    "price":650,
                  }

            }
            break;
          case "back_and_belly":
            this.services= {
              "full_belly":
                  {
                    "name": "Живот полностью",
                    "code": "full_belly",
                    "price":1300,
                  },
              "white_line_abdomen":
                  {
                    "name": "Белая линия живота",
                    "code": "white_line_abdomen",
                    "price":585,
                  },
              "full_back":
                  {
                    "name": "Спина полностью",
                    "code": "full_back",
                    "price":1950,
                  },
              "small_back":
                  {
                    "name": "Поясница",
                    "code": "small_back",
                    "price":1040,
                  },
              "full_chest":
                  {
                    "name": "Грудь полностью",
                    "code": "full_chest",
                    "price":1690,
                  },
              "areolas_nipples":
                  {
                    "name": "Ареолы сосков",
                    "code": "areolas_nipples",
                    "price":585,
                  },


            }
            break;
        }
      } else if(this.floor === 'man' && this.laser === 'alexandrite_laser'){ //Лазерная эпиляция (Candela GentleLase Pro, мужчины)
        switch (this.choose_zone){
          case "face_and_neck":
            this.services= {
              "full_face":
                  {
                    "name": "Лицо полностью",
                    "code": "full_face",
                    "price":3510,
                  },
              "neck_front":
                  {
                    "name": "Шея спереди",
                    "code": "neck_front",
                    "price":910,
                  },
              "back_neck":
                  {
                    "name": "Шея сзади",
                    "code": "back_neck",
                    "price":910,
                  },
              "beard_correction":
                  {
                    "name": "Коррекция бороды",
                    "code": "beard_correction",
                    "price":2500,
                  },
              "nustache":
                  {
                    "name": "Усы",
                    "code": "nustache",
                    "price":780,
                  },
              "eyebrow":
                  {
                    "name": "Межбровье",
                    "code": "eyebrow",
                    "price":390,
                  },
              "sideburns":
                  {
                    "name": "Бакенбарды",
                    "code": "sideburns",
                    "price":910,
                  },
              "cheeks":
                  {
                    "name": "Щеки",
                    "code": "cheeks",
                    "price":910,
                  },
              "chin":
                  {
                    "name": "Подбородок",
                    "code": "chin",
                    "price":910,
                  },
              "lob":
                  {
                    "name": "Лоб",
                    "code": "lob",
                    "price":910,
                  },
              "mustache":
                  {
                    "name": "Усы",
                    "code": "mustache",
                    "price":910,
                  },
              "nostrils":
                  {
                    "name": "Ноздри",
                    "code": "nostrils",
                    "price":780,
                  },


            }
            break;
          case "arms":
            this.services= {
              "hands_completely":
                  {
                    "name": "Руки полностью",
                    "code": "hands_completely",
                    "price":3510,
                  },
              "armpits":
                  {
                    "name": "Подмышечные впадины",
                    "code": "armpits",
                    "price":1820,
                  },
              "forearm":
                  {
                    "name": "Предплечье",
                    "code": "forearm",
                    "price":2340,
                  },
              "hands_fingers":
                  {
                    "name": "Кисти рук+пальцы",
                    "code": "hands_fingers",
                    "price":910,
                  },

            }
            break;
          case "legs":
            this.services= {
              "full_legs":
                  {
                    "name": "Ноги полностью",
                    "code": "full_legs",
                    "price":8710,
                  },
              "hips":
                  {
                    "name": "Бедра",
                    "code": "hips",
                    "price":5070,
                  },
              "knees":
                  {
                    "name": "Колени",
                    "code": "knees",
                    "price":1560,
                  },
              "shins":
                  {
                    "name": "Голени",
                    "code": "shins",
                    "price":4160,
                  },
              "foot_toes":
                  {
                    "name": "Стопа + пальцы",
                    "code": "foot_toes",
                    "price":910,
                  }

            }
            break;
          case "back_and_belly":
            this.services= {
              "full_belly":
                  {
                    "name": "Живот полностью",
                    "code": "full_belly",
                    "price":2210,
                  },
              "white_line_abdomen":
                  {
                    "name": "Белая линия живота",
                    "code": "white_line_abdomen",
                    "price":910,
                  },
              "full_back":
                  {
                    "name": "Спина полностью",
                    "code": "full_back",
                    "price":4290,
                  },

              "small_back":
                  {
                    "name": "Поясница",
                    "code": "small_back",
                    "price":1690,
                  },
              "full_chest":
                  {
                    "name": "Грудь полностью",
                    "code": "full_chest",
                    "price":2340,
                  },
              "areolas_nipples":
                  {
                    "name": "Ареолы сосков",
                    "code": "areolas_nipples",
                    "price":910,
                  },
              "neckline":
                  {
                    "name": "Декольте",
                    "code": "neckline",
                    "price":1170,
                  },

            }
            break;
        }
      }*/
    },
    val_service: function (){
      if(this.val_service.length > 0){
        this.isSelectedServices=true;
        this.SelectedServices=[];
        let tmpPrice=0;
        for (let i = 0; i < this.val_service.length; i++) {

          let code = this.val_service[i];

          if(this.Allservices[this.floor][this.laser][this.choose_zone][code] !== undefined){
            tmpPrice = tmpPrice +this.Allservices[this.floor][this.laser][this.choose_zone][code].price;


            this.SelectedServices[i]=this.Allservices[this.floor][this.laser][this.choose_zone][code];
          }

        }
        this.price =tmpPrice;

      } else {
        this.SelectedServices=[];
        this.price=0;
      }

    }


  },
  methods:{
    showModal: function (){
      this.isActive = !this.isActive,
      this.currentStep= 1,
      this.val_service=[],
      this.SelectedServices={},
      this.val_service=[],
      this.floor='',
      this.laser='',
      this.choose_zone='',
      this.price='',
      this.first_visit=false,
      this.isShowChooseZone=false,
      this.isSelectedServices=false,
      this.$store.dispatch('clearServices');
      this.$store.dispatch('clearPrice');

    },
    removeService: function (index){
      console.log(index)
      this.$store.dispatch('removeServices', index);
    },
    removeServiceTmp: function (code){
      document.getElementById(code).click();

    },

    addServices: function (){
      this.$store.dispatch('addServices', this.SelectedServices);
      this.$store.dispatch('addPrice', this.price);
      this.services={};
      this.SelectedServices=[];
      this.price=0;
      this.choose_zone='';
    },
    goToStep: function(step) {
      if(step == 2){
        this.$store.dispatch('addServices', this.SelectedServices);
        this.$store.dispatch('addPrice', this.price);
        this.SelectedServices=[];
        this.price=0;
        this.choose_zone='';
      }
      this.currentStep = step;
    },
    onSubmit(values) {
      console.log(values);
      console.log(this.$store.state.services);
      console.log(this.allPrice);

      const data = { form: values, servise:this.$store.state.services, price: this.allPrice};
      /*const data={'form':1}
      const headers = {
        'Accept': 'application/json',
        'Content-Type': 'application/json',
      };
      axios.get("https://script.kdm1.ru/epiliumclinic/", data,{headers})
          .then(response => {
            console.log(response);
          });*/


      axios.get('https://script.kdm1.ru/epiliumclinic/', {
        params: {
          q: data
        }
      }).then(response => {
        if(response.data === 'OK'){
          this.currentStep=3;
        }
      });



      //this.goToStep(2);
    },
    validatePhone(value) {
      // if the field is empty
      let im = new Inputmask("+7 (999) 999 99-99");
      im.mask(document.getElementById('phone-mask'));
      if (!value) {
        return 'Телефон не заполнен';
      }
      // if the field is not a valid email
     /* const regex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
      if (!regex.test(value)) {
        return 'This field must be a valid email';
      }*/
      // All is good
      return true;
    },
    validateText(value) {
      // if the field is empty
      if (!value) {
        return 'Введите имя';
      }
      return true;
    },
  }
}
</script>
